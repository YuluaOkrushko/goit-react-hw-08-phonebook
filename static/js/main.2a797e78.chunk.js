(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{106:function(t,e,r){"use strict";r.r(e);var n,c=r(0),a=r(21),u=r.n(a),s=r(12),o=r(18),i=r(67),b=r(15),l=r(50),j=r(51),O=r(53),d=r(52),h=r(8),f=[{path:"/",label:"Home",exact:!0,component:Object(c.lazy)((function(){return r.e(4).then(r.bind(null,124))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(c.lazy)((function(){return r.e(7).then(r.bind(null,123))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(c.lazy)((function(){return r.e(6).then(r.bind(null,122))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(c.lazy)((function(){return Promise.all([r.e(5),r.e(3)]).then(r.bind(null,125))})),private:!0,restricted:!1}],g=r(110),p=r(17),m=r(2),v=Object(s.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(m.jsxs)(g.a,{className:"mr-auto",children:[Object(m.jsx)(g.a.Link,{as:o.b,to:"/",children:"Home"}),e&&Object(m.jsx)(g.a.Link,{as:o.b,to:"/contacts",children:"Contacts"})]})})),x=r(108),k=r(40),C=r.n(k),S=Object(s.b)((function(t){return{name:p.b.getUserName(t),avatar:"https://icon-library.com/images/avatar-icon-images/avatar-icon-images-7.jpg"}}),{onLogout:p.a.logOut})((function(t){var e=t.avatar,r=t.name,n=t.onLogout;return Object(m.jsxs)("div",{className:C.a.container,children:[Object(m.jsx)("img",{src:e,alt:"",width:"32",className:C.a.avatar}),Object(m.jsxs)("span",{className:C.a.name,children:["Welcome, ",r]}),Object(m.jsx)(x.a,{variant:"outline-info",onClick:n,children:"Logout"})]})})),E=function(){return Object(m.jsxs)(g.a,{children:[Object(m.jsx)(g.a.Link,{as:o.b,to:"/login",children:"Login"}),Object(m.jsx)(g.a.Link,{as:o.b,to:"/register",children:"Register"})]})},y=r(109),R=Object(s.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(m.jsxs)(y.a,{collapseOnSelect:!0,bg:"dark",variant:"dark",children:[Object(m.jsx)(y.a.Brand,{children:"Phone Book"}),Object(m.jsx)(v,{})," ",e?Object(m.jsx)(S,{}):Object(m.jsx)(E,{})]})})),U=r(38),q=Object(s.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.component,r=t.isAuthenticated,n=Object(U.a)(t,["component","isAuthenticated"]);return Object(m.jsx)(h.b,Object(b.a)(Object(b.a)({},n),{},{render:function(t){return r?Object(m.jsx)(e,Object(b.a)({},t)):Object(m.jsx)(h.a,{to:{pathname:"/login",state:{from:t.location}}})}}))})),A=Object(s.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.component,r=t.isAuthenticated,n=Object(U.a)(t,["component","isAuthenticated"]);return Object(m.jsx)(h.b,Object(b.a)(Object(b.a)({},n),{},{render:function(t){return r&&n.restricted?Object(m.jsx)(h.a,{to:"/contacts"}):Object(m.jsx)(e,Object(b.a)({},t))}}))})),w=r(33),L=(r(73),function(t){Object(O.a)(r,t);var e=Object(d.a)(r);function r(){return Object(l.a)(this,r),e.apply(this,arguments)}return Object(j.a)(r,[{key:"componentDidMount",value:function(){this.props.getCurrentUser()}},{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R,{}),Object(m.jsx)(c.Suspense,{fallback:Object(m.jsx)("h4",{children:"Loading..."}),children:Object(m.jsx)(h.d,{children:f.map((function(t){return t.private?Object(m.jsx)(q,Object(b.a)({},t),t.label):Object(m.jsx)(A,Object(b.a)(Object(b.a)({},t),{},{restricted:t.restricted}),t.label)}))})})]})}}]),r}(c.Component)),_={getCurrentUser:w.a.getCurrentUser},z=Object(s.b)(null,_)(L),N=r(37),B=r(4),M=r(49),H=r(70),J=r.n(H),P=r(6),W=r(9),D=r(35),F=Object(B.c)([],(n={},Object(P.a)(n,D.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(P.a)(n,D.a.addContactSuccess,(function(t,e){return[].concat(Object(N.a)(t),[e.payload])})),Object(P.a)(n,D.a.deleteContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),n)),I=Object(W.c)({phoneBookReducer:F}),Q=r(64),Y=Object(B.c)("",Object(P.a)({},Q.a,(function(t,e){return e.payload.value}))),G=Object(W.c)({filterContactReducer:Y}),K=r(32),T=Object(B.d)({serializableCheck:!1}),V={key:"auth",storage:J.a,whiteList:["token"]},X=Object(B.a)({reducer:{contacts:I,filter:G,auth:Object(M.a)(V,K.a)},middleware:Object(N.a)(T)}),Z=Object(M.b)(X);u.a.render(Object(m.jsx)(s.a,{store:X,children:Object(m.jsx)(i.a,{loading:null,persistor:Z,children:Object(m.jsx)(o.a,{children:Object(m.jsx)(z,{})})})}),document.querySelector("#root"))},17:function(t,e,r){"use strict";r.d(e,"a",(function(){return n.a})),r.d(e,"b",(function(){return c}));r(5),r(32);var n=r(33),c={isAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name}}},32:function(t,e,r){"use strict";var n,c,a,u,s=r(6),o=r(4),i=r(9),b=r(5),l={name:null,email:null},j=Object(o.c)(l,(n={},Object(s.a)(n,b.a.registerSuccess,(function(t,e){return e.payload.user})),Object(s.a)(n,b.a.loginSuccess,(function(t,e){return e.payload.user})),Object(s.a)(n,b.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(s.a)(n,b.a.logoutSuccess,(function(){return l})),n)),O=Object(o.c)(null,(c={},Object(s.a)(c,b.a.registerSuccess,(function(t,e){return e.payload.token})),Object(s.a)(c,b.a.loginSuccess,(function(t,e){return e.payload.token})),Object(s.a)(c,b.a.logoutSuccess,(function(){return null})),c)),d=function(t,e){return e.payload},h=Object(o.c)(null,(a={},Object(s.a)(a,b.a.registerError,d),Object(s.a)(a,b.a.loginError,d),Object(s.a)(a,b.a.logoutError,d),Object(s.a)(a,b.a.getCurrentUserError,d),a)),f=Object(o.c)(!1,(u={},Object(s.a)(u,b.a.registerSuccess,(function(){return!0})),Object(s.a)(u,b.a.loginSuccess,(function(){return!0})),Object(s.a)(u,b.a.getCurrentUserSuccess,(function(){return!0})),Object(s.a)(u,b.a.registerError,(function(){return!1})),Object(s.a)(u,b.a.loginError,(function(){return!1})),Object(s.a)(u,b.a.getCurrentUserError,(function(){return!1})),Object(s.a)(u,b.a.logoutError,(function(){return!1})),Object(s.a)(u,b.a.logoutSuccess,(function(){return!1})),u));e.a=Object(i.c)({user:j,token:O,isAuthenticated:f,error:h})},33:function(t,e,r){"use strict";var n=r(20),c=r.n(n),a=r(29),u=r(23),s=r.n(u),o=r(5);s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var i=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){s.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(o.a.registerRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:n=e.sent,i(n.data.token),r(o.a.registerSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(o.a.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(o.a.loginRequest()),e.prev=1,e.next=4,s.a.post("users/login",t);case 4:n=e.sent,i(n.data.token),r(o.a.loginSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(o.a.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(o.a.logoutRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:b(),e(o.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(o.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,r){var n,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r(),a=n.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(a),e(o.a.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:u=t.sent,e(o.a.getCurrentUserSuccess(u.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(o.a.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,r){return t.apply(this,arguments)}}()}}},35:function(t,e,r){"use strict";var n=r(4),c=Object(n.b)("contact/addRequest"),a=Object(n.b)("contact/addSuccess"),u=Object(n.b)("contact/addError"),s=Object(n.b)("contact/fetchRequest"),o=Object(n.b)("contact/fetchSuccess"),i=Object(n.b)("contact/fetchError"),b=Object(n.b)("contact/deleteRequest"),l=Object(n.b)("contact/deleteSuccess"),j=Object(n.b)("contact/deleteError");e.a={addContactRequest:c,addContactSuccess:a,addContactError:u,fetchContactsRequest:s,fetchContactsSuccess:o,fetchContactsError:i,deleteContactRequest:b,deleteContactSuccess:l,deleteContactError:j}},40:function(t,e,r){t.exports={container:"UserMenu_container__Ykiz7",avatar:"UserMenu_avatar__2i3bW",name:"UserMenu_name__2luQj"}},5:function(t,e,r){"use strict";var n=r(4),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),u=Object(n.b)("auth/registerError"),s=Object(n.b)("auth/loginRequest"),o=Object(n.b)("auth/loginSuccess"),i=Object(n.b)("auth/loginError"),b=Object(n.b)("auth/logoutRequest"),l=Object(n.b)("auth/logoutSuccess"),j=Object(n.b)("auth/logoutError"),O=Object(n.b)("auth/getCurrentUserRequest"),d=Object(n.b)("auth/getCurrentUserSuccess"),h=Object(n.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:u,loginRequest:s,loginSuccess:o,loginError:i,logoutRequest:b,logoutSuccess:l,logoutError:j,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:h}},64:function(t,e,r){"use strict";var n=r(4),c=Object(n.b)("contact/filter",(function(t){return{payload:{value:t}}}));e.a=c}},[[106,1,2]]]);
//# sourceMappingURL=main.2a797e78.chunk.js.map